# Streak Queries

## Quick Navigation

- [Overview](1-overview.md)
- [System Architecture](2-system-architecture.md)
  - [Application Configuration](2.1-application-configuration.md)
- [Database Models](3-database-models.md)
  - [Member Model](3.1-member-model.md)
  - [Attendance Model](3.2-attendance-model.md)
  - [Streak Model](3.3-streak-model.md)
  - [Project Model](3.4-project-model.md)
- [GraphQL API](4-graphql-api.md)
  - [GraphQL Queries](4.1-graphql-queries.md)
    - [Member Queries](4.1.1-member-queries.md)
    - [Attendance Queries](4.1.2-attendance-queries.md)
    - [Streak Queries](4.1.3-streak-queries.md)
    - [Project Queries](4.1.4-project-queries.md)
  - [GraphQL Mutations](4.2-graphql-mutations.md)
    - [Member Mutations](4.2.1-member-mutations.md)
    - [Attendance Mutations](4.2.2-attendance-mutations.md)
    - [Streak Mutations](4.2.3-streak-mutations.md)
    - [Project Mutations](4.2.4-project-mutations.md)
- [Background Tasks](5-background-tasks.md)
  - [Daily Attendance Task](5.1-daily-attendance-task.md)
- [Deployment and CI/CD](6-deployment-and-cicd.md)
  - [GitHub Actions Workflows](6.1-github-actions-workflows.md)
  - [Docker Deployment](6.2-docker-deployment.md)
- [Security Features](7-security-features.md)
  - [HMAC Authentication](7.1-hmac-authentication.md)

## Table of Contents

- [Streak Queries](#streak-queries)
  - [Purpose and Scope](#purpose-and-scope)
  - [Overview](#overview)
  - [Available Queries](#available-queries)
  - [Query Implementation Details](#query-implementation-details)
    - [Streak Query](#streak-query)
    - [Streaks Query](#streaks-query)
  - [Data Model](#data-model)
  - [Example Usage](#example-usage)
    - [Querying a Single Member's Streak](#querying-a-single-members-streak)
    - [Querying All Members' Streaks](#querying-all-members-streaks)
  - [Integration with Other Components](#integration-with-other-components)

# Streak Queries

Relevant source files

* [src/graphql/queries/streak\_queries.rs](https://github.com/amfoss/root/blob/2b58803d/src/graphql/queries/streak_queries.rs)

## Purpose and Scope

This document details the GraphQL queries available for retrieving status update streak information from the Root system. Status update streaks track member activity patterns by recording their current and maximum achieved streaks. For information about modifying streak data, see [Streak Mutations](/amfoss/root/4.2.3-streak-mutations).

## Overview

The streak system maintains records of each member's streak status, providing a way to monitor and incentivize consistent participation. Streak queries allow clients to access this information through the GraphQL API.

Sources: [src/graphql/queries/streak\_queries.rs1-32](https://github.com/amfoss/root/blob/2b58803d/src/graphql/queries/streak_queries.rs#L1-L32)

## Available Queries

The system provides two main queries for accessing streak information:

| Query | Parameters | Returns | Description |
| --- | --- | --- | --- |
| `streak` | `member_id: i32` | `Streak` | Retrieves streak information for a specific member |
| `streaks` | None | `Vec<Streak>` | Retrieves streak information for all members |

Sources: [src/graphql/queries/streak\_queries.rs12-31](https://github.com/amfoss/root/blob/2b58803d/src/graphql/queries/streak_queries.rs#L12-L31)

## Query Implementation Details

### Streak Query

The `streak` query retrieves the current and maximum streak values for a specified member.

Implementation:

* The query accepts a `member_id` parameter to identify the specific member
* Uses SQL to fetch the corresponding `current_streak` and `max_streak` values from the `StatusUpdateStreak` table
* Returns a single `Streak` object or an error if the member's streak record is not found

Sources: [src/graphql/queries/streak\_queries.rs12-21](https://github.com/amfoss/root/blob/2b58803d/src/graphql/queries/streak_queries.rs#L12-L21)

### Streaks Query

The `streaks` query retrieves streak information for all members in the system.

Implementation:

* No parameters required
* Executes a SQL query to fetch all records from the `StatusUpdateStreak` table
* Returns a vector of `Streak` objects

Sources: [src/graphql/queries/streak\_queries.rs23-31](https://github.com/amfoss/root/blob/2b58803d/src/graphql/queries/streak_queries.rs#L23-L31)

## Data Model

The streak queries interact with the `StatusUpdateStreak` model, which has the following structure:

* `member_id`: Primary key and foreign key to the Member table
* `current_streak`: The member's ongoing streak count
* `max_streak`: The highest streak count the member has achieved

Sources: [src/graphql/queries/streak\_queries.rs3](https://github.com/amfoss/root/blob/2b58803d/src/graphql/queries/streak_queries.rs#L3-L3)

## Example Usage

### Querying a Single Member's Streak

### Querying All Members' Streaks

## Integration with Other Components

Streak queries are typically used by client applications to:

1. Display a member's current streak status
2. Show leaderboards of members with the highest streaks
3. Calculate engagement metrics for the organization

The streak data is maintained by the corresponding [Streak Mutations](/amfoss/root/4.2.3-streak-mutations), which update the current and maximum streak values when members perform relevant activities.

Sources: [src/graphql/queries/streak\_queries.rs1-32](https://github.com/amfoss/root/blob/2b58803d/src/graphql/queries/streak_queries.rs#L1-L32)